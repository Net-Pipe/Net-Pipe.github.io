<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Net Pipe&#39;s Blog</title>  
  <meta name="description" content="01 背包 ¶ 给定 $n$ 个物品，第 $i$ 个物品体积为 $c[i]$,">
  <meta name="author" content="Net Pipe">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href='../../../../index.xml' rel='alt' type='application/rss+xml' title='Net Pipe&#39;s Blog' />
  <link rel='shortcut icon' type='image/x-icon' href='../../../../images/NetPipe.png' />

  
  <style>* {
  --aside-width: 16rem;
  --max-width: 80rem;
  --link-color: #003366;
  --hover-color: #F6F8FA;
  --border-color: #CCCCCC;
  --shadow: rgba(0, 0, 0, 0.16) 0px 1px 4px;
  --background: rgba(255, 255, 255, 0.2);
  --background-hover: rgba(255, 255, 255, 0.5);
  --border: 1px solid var(--border-color);
  --radius: 3px; }

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  outline: none;
  transition: all .15s; }

::selection {
  background-color: #CCE2FF;
  color: rgba(0, 0, 0, 0.87); }

::-webkit-scrollbar {
  width: 7px;
  height: 7px; }

::-webkit-scrollbar-thumb {
  border-radius: 10px;
  background: #c3c3c33b; }
  ::-webkit-scrollbar-thumb:hover {
    background: #c3c3c37b; }

::-webkit-scrollbar-track {
  border-radius: 10px; }

a {
  text-decoration: none;
  color: var(--link-color); }

a:focus, a:hover {
  outline: none;
  text-decoration: underline; }

a.alt, a.silent {
  color: black; }

a.alt:focus,
a.alt:hover,
a.alt:focus > *,
a.alt:hover > * {
  color: var(--link-color);
  text-decoration: underline; }

a.silent:focus,
a.silent:hover,
a.silent:focus > *,
a.silent:hover > * {
  color: black;
  text-decoration: none; }

ul, ol {
  list-style: circle;
  padding-left: 1rem; }
  ul li, ol li {
    margin: .3rem 0; }

@font-face {
  font-family: 'Fantasque Sans Mono';
  src: url("/fonts/FantasqueSansMono-Regular.woff2") format("woff2"); }

@font-face {
  font-family: 'Fantasque Sans Mono';
  font-style: normal;
  font-weight: bold;
  src: url("/fonts/FantasqueSansMono-Bold.woff2") format("woff2"); }

@font-face {
  font-family: 'Fantasque Sans Mono';
  font-style: italic;
  src: url("/fonts/FantasqueSansMono-Italic.woff2") format("woff2"); }

@font-face {
  font-family: 'Fantasque Sans Mono';
  font-style: italic;
  font-weight: bold;
  src: url("/fonts/FantasqueSansMono-BoldItalic.woff2") format("woff2"); }

body, code, input {
  font-family: 'Fantasque Sans Mono', sans-serif; }

html, body, main {
  height: 100%;
  overflow: hidden; }

body {
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  background: url(/images/BackGround.jpg) 0/cover fixed;
  margin: 0 auto;
  max-width: var(--max-width); }

main {
  display: flex;
  position: relative; }

aside {
  flex: 0 0 var(--aside-width);
  padding: 1rem;
  overflow: hidden auto; }
  aside > :first-child,
  aside > :first-child > :first-child,
  aside > :first-child > :first-child > :first-child {
    margin-top: 0 !important; }
  aside > :last-child,
  aside > :last-child > :last-child,
  aside > :last-child > :last-child > :last-child {
    margin-bottom: 0 !important; }

article {
  flex-grow: 1;
  padding: 1rem;
  overflow: hidden auto; }
  article .post-toc {
    display: none; }

.tag-card {
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position: relative;
  background: var(--background) !important;
  border-radius: var(--radius);
  display: inline-block;
  padding: .1rem .5rem;
  margin: .3rem 0; }
  .tag-card::before {
    background: url(/images/BackGround.jpg) 0/cover fixed;
    content: "";
    filter: blur(15px);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -999; }
  .tag-card:hover {
    background: var(--background-hover) !important; }
  .tag-card a {
    font-size: 13px;
    text-shadow: 0 0; }

.post-meta img {
  width: 16px;
  height: 16px;
  display: inline-block !important;
  vertical-align: text-bottom; }

h2.alt {
  margin: .5rem 0;
  font-size: 22px; }
  h2.alt img.alt {
    width: 20px;
    height: 20px;
    vertical-align: text-top;
    margin-right: 0.5rem; }

.content h2.alt img.alt {
  display: none; }

#TableOfContents > ul li {
  list-style: none; }

aside {
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position: relative;
  background: var(--background) !important;
  border-radius: var(--radius);
  margin: 1rem; }
  aside::before {
    background: url(/images/BackGround.jpg) 0/cover fixed;
    content: "";
    filter: blur(15px);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -999; }
  aside > :first-child,
  aside > :first-child > :first-child,
  aside > :first-child > :first-child > :first-child {
    margin-top: 0 !important; }
  aside > :last-child,
  aside > :last-child > :last-child,
  aside > :last-child > :last-child > :last-child {
    margin-bottom: 0 !important; }

aside.meta {
  margin-right: 0;
  order: 1; }
  aside.meta .author {
    text-align: center; }
    aside.meta .author img {
      transition: all 0.2s;
      width: 6rem;
      height: 6rem;
      border-radius: 1rem; }
      aside.meta .author img:hover {
        transform: perspective(1px) scale(1.04); }
    aside.meta .author h2.name {
      margin: .5rem; }
  aside.meta .data {
    display: flex;
    text-align: center; }
    aside.meta .data .data-box {
      flex: 0 0 50%;
      display: inline-block; }
      aside.meta .data .data-box:first-of-type {
        border-right: 1px solid black; }
  aside.meta .social {
    margin: 1rem 0; }
    aside.meta .social .social-box {
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: relative;
      background: var(--background) !important;
      border-radius: var(--radius);
      margin-top: .5rem;
      padding: .3rem .5rem;
      font-size: 18px; }
      aside.meta .social .social-box::before {
        background: url(/images/BackGround.jpg) 0/cover fixed;
        content: "";
        filter: blur(15px);
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: -999; }
      aside.meta .social .social-box:hover {
        background: var(--background-hover) !important; }
      aside.meta .social .social-box img {
        vertical-align: text-bottom;
        width: 20px;
        height: 20px;
        margin-right: 8px; }
  aside.meta .search {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 35px;
    right: 0;
    height: 30px; }
    aside.meta .search input {
      display: inline;
      width: 100%;
      height: 100%;
      border: none;
      font-size: 17px;
      background-color: transparent; }

aside.toc {
  margin-left: 0;
  order: 3; }

article {
  order: 2; }

article.posts .post {
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position: relative;
  background: var(--background) !important;
  border-radius: var(--radius);
  padding: 1rem;
  margin: 1rem 0; }
  article.posts .post::before {
    background: url(/images/BackGround.jpg) 0/cover fixed;
    content: "";
    filter: blur(15px);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -999; }
  article.posts .post:hover {
    background: var(--background-hover) !important; }
  article.posts .post .post-title {
    font-size: 20px; }

article.posts .pagination {
  width: 100%;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  margin-top: 1rem; }
  article.posts .pagination div.pagination-box {
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    position: relative;
    background: var(--background) !important;
    border-radius: var(--radius);
    color: var(--link-color);
    margin: 0 .5rem;
    width: 2rem;
    height: 2rem;
    line-height: 2rem;
    float: left;
    text-align: center;
    vertical-align: middle;
    cursor: default; }
    article.posts .pagination div.pagination-box::before {
      background: url(/images/BackGround.jpg) 0/cover fixed;
      content: "";
      filter: blur(15px);
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -999; }
    article.posts .pagination div.pagination-box:not(.disabled):hover {
      background: var(--background-hover) !important; }
  article.posts .pagination div.prev {
    width: 5rem;
    margin-left: 0; }
  article.posts .pagination div.next {
    width: 5rem;
    margin-right: 0; }
  article.posts .pagination div.pagination-eldivpsis {
    width: 3rem; }
  article.posts .pagination div.disabled {
    color: black; }

article.posts > :first-child,
article.posts > :first-child > :first-child,
article.posts > :first-child > :first-child > :first-child {
  margin-top: 0 !important; }

article.posts > :last-child,
article.posts > :last-child > :last-child,
article.posts > :last-child > :last-child > :last-child {
  margin-bottom: 0 !important; }

article.list .post-item {
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position: relative;
  background: var(--background) !important;
  border-radius: var(--radius);
  height: 2.3rem;
  line-height: 2.3rem;
  margin: .3rem 0; }
  article.list .post-item::before {
    background: url(/images/BackGround.jpg) 0/cover fixed;
    content: "";
    filter: blur(15px);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -999; }
  article.list .post-item:hover {
    background: var(--background-hover) !important; }
  article.list .post-item img {
    width: 1.2rem;
    height: 1.2rem;
    margin-left: .6rem;
    vertical-align: sub; }
  article.list .post-item:first-of-type {
    height: 3rem;
    line-height: 3.2rem;
    font-size: 1.2rem;
    margin-top: 0;
    margin-bottom: .5rem; }
    article.list .post-item:first-of-type img {
      width: 1.4rem;
      height: 1.4rem; }
  article.list .post-item:last-of-type {
    border: none;
    margin-bottom: 0; }

article.markdown .content {
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  position: relative;
  background: var(--background) !important;
  border-radius: var(--radius);
  padding: 1rem; }
  article.markdown .content::before {
    background: url(/images/BackGround.jpg) 0/cover fixed;
    content: "";
    filter: blur(15px);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -999; }
  article.markdown .content > :first-child,
  article.markdown .content > :first-child > :first-child,
  article.markdown .content > :first-child > :first-child > :first-child {
    margin-top: 0 !important; }
  article.markdown .content > :last-child,
  article.markdown .content > :last-child > :last-child,
  article.markdown .content > :last-child > :last-child > :last-child {
    margin-bottom: 0 !important; }
  article.markdown .content h1, article.markdown .content h1 .katex {
    font-size: 28px; }
  article.markdown .content h2, article.markdown .content h2 .katex {
    font-size: 24px; }
  article.markdown .content h1, article.markdown .content h2, article.markdown .content h3, article.markdown .content h4, article.markdown .content h5, article.markdown .content h6 {
    margin: .5rem 0;
    font-weight: normal; }
    article.markdown .content h1 .anchor, article.markdown .content h2 .anchor, article.markdown .content h3 .anchor, article.markdown .content h4 .anchor, article.markdown .content h5 .anchor, article.markdown .content h6 .anchor {
      opacity: 0; }
    article.markdown .content h1:hover .anchor, article.markdown .content h1:focus .anchor, article.markdown .content h2:hover .anchor, article.markdown .content h2:focus .anchor, article.markdown .content h3:hover .anchor, article.markdown .content h3:focus .anchor, article.markdown .content h4:hover .anchor, article.markdown .content h4:focus .anchor, article.markdown .content h5:hover .anchor, article.markdown .content h5:focus .anchor, article.markdown .content h6:hover .anchor, article.markdown .content h6:focus .anchor {
      opacity: 1; }
  article.markdown .content p {
    margin: .3rem 0; }
  article.markdown .content strong {
    font-weight: normal;
    text-shadow: 0 0; }
  article.markdown .content img:not(.alt) {
    display: block;
    margin: 0 auto;
    max-width: 100%; }
  article.markdown .content blockquote {
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    position: relative;
    background: var(--background) !important;
    border-radius: var(--radius);
    margin: .5rem 0;
    padding: .5rem 1rem; }
    article.markdown .content blockquote::before {
      background: url(/images/BackGround.jpg) 0/cover fixed;
      content: "";
      filter: blur(15px);
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -999; }
    article.markdown .content blockquote > :first-child,
    article.markdown .content blockquote > :first-child > :first-child,
    article.markdown .content blockquote > :first-child > :first-child > :first-child {
      margin-top: 0 !important; }
    article.markdown .content blockquote > :last-child,
    article.markdown .content blockquote > :last-child > :last-child,
    article.markdown .content blockquote > :last-child > :last-child > :last-child {
      margin-bottom: 0 !important; }
  article.markdown .content code {
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    position: relative;
    background: var(--background) !important;
    border-radius: var(--radius);
    user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    padding: 1px 2px; }
    article.markdown .content code::before {
      background: url(/images/BackGround.jpg) 0/cover fixed;
      content: "";
      filter: blur(15px);
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -999; }
  article.markdown .content pre {
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    position: relative;
    background: var(--background) !important;
    border-radius: var(--radius);
    user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    margin: .5rem 0;
    padding: .5rem 1rem;
    overflow: auto hidden;
    line-height: 1.3rem; }
    article.markdown .content pre::before {
      background: url(/images/BackGround.jpg) 0/cover fixed;
      content: "";
      filter: blur(15px);
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -999; }
    article.markdown .content pre code {
      border: none;
      background: none !important;
      box-shadow: none;
      padding: 0; }
  article.markdown .content table {
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    position: relative;
    background: var(--background) !important;
    border-radius: var(--radius);
    margin: .5rem 0;
    overflow: auto;
    border-spacing: 0;
    display: block;
    -webkit-overflow-scrolling: touch; }
    article.markdown .content table::before {
      background: url(/images/BackGround.jpg) 0/cover fixed;
      content: "";
      filter: blur(15px);
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -999; }
    article.markdown .content table th, article.markdown .content table td {
      padding: .3rem 16px;
      font-weight: normal;
      white-space: nowrap; }
  article.markdown .content .book-columns {
    display: flex;
    flex-wrap: wrap;
    margin: .5rem;
    margin-left: -.5rem;
    margin-right: -.5rem; }
    article.markdown .content .book-columns .markdown-inner {
      margin: .5rem;
      flex: 1 1; }
  article.markdown .content .book-tabs {
    margin: .5em 0;
    overflow: visible;
    display: flex;
    flex-wrap: wrap; }
    article.markdown .content .book-tabs label {
      height: 2rem;
      line-height: 2rem;
      display: inline-block;
      padding: 0 1rem;
      min-width: 2.5rem;
      cursor: pointer;
      z-index: 999;
      text-align: center; }
    article.markdown .content .book-tabs .book-tabs-content {
      order: 999;
      width: 100%;
      display: none;
      overflow: visible;
      padding-top: .5rem; }
      article.markdown .content .book-tabs .book-tabs-content > :first-child,
      article.markdown .content .book-tabs .book-tabs-content > :first-child > :first-child,
      article.markdown .content .book-tabs .book-tabs-content > :first-child > :first-child > :first-child {
        margin-top: 0 !important; }
      article.markdown .content .book-tabs .book-tabs-content > :last-child,
      article.markdown .content .book-tabs .book-tabs-content > :last-child > :last-child,
      article.markdown .content .book-tabs .book-tabs-content > :last-child > :last-child > :last-child {
        margin-bottom: 0 !important; }
    article.markdown .content .book-tabs input[type="radio"] {
      display: none; }
      article.markdown .content .book-tabs input[type="radio"]:not(:checked) + label:hover {
        background: var(--background-hover) !important; }
      article.markdown .content .book-tabs input[type="radio"]:checked + label {
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        position: relative;
        background: var(--background) !important;
        border-radius: var(--radius); }
        article.markdown .content .book-tabs input[type="radio"]:checked + label::before {
          background: url(/images/BackGround.jpg) 0/cover fixed;
          content: "";
          filter: blur(15px);
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
          z-index: -999; }
        article.markdown .content .book-tabs input[type="radio"]:checked + label + .book-tabs-content {
          display: block; }
  article.markdown .content details {
    margin: .3rem 0; }
    article.markdown .content details summary {
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: relative;
      background: var(--background) !important;
      border-radius: var(--radius);
      font-size: 14px;
      padding: .3rem;
      text-shadow: 0 0; }
      article.markdown .content details summary::before {
        background: url(/images/BackGround.jpg) 0/cover fixed;
        content: "";
        filter: blur(15px);
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: -999; }
      article.markdown .content details summary:hover {
        background: var(--background-hover) !important; }
      article.markdown .content details summary::marker {
        content: '';
        font-size: 0; }
      article.markdown .content details summary img.alt {
        width: 18px;
        height: 18px;
        margin-right: .2rem;
        vertical-align: sub;
        transition: .2s all; }
    article.markdown .content details ::-webkit-details-marker,
    article.markdown .content details ::-moz-list-bullet {
      content: '';
      font-size: 0; }
    article.markdown .content details .markdown-inner {
      margin-top: .5rem; }
      article.markdown .content details .markdown-inner > :first-child,
      article.markdown .content details .markdown-inner > :first-child > :first-child,
      article.markdown .content details .markdown-inner > :first-child > :first-child > :first-child {
        margin-top: 0 !important; }
      article.markdown .content details .markdown-inner > :last-child,
      article.markdown .content details .markdown-inner > :last-child > :last-child,
      article.markdown .content details .markdown-inner > :last-child > :last-child > :last-child {
        margin-bottom: 0 !important; }
    article.markdown .content details:focus {
      outline: none; }
    article.markdown .content details[open] > summary {
      margin-bottom: 0; }
      article.markdown .content details[open] > summary img.alt {
        transform: rotate(90deg); }

article::-webkit-scrollbar {
  width: 0px !important;
  height: 0px !important; }

@media screen and (max-width: 65rem) {
  aside.toc {
    display: none; }
  article .post-toc {
    display: block !important; } }

@media screen and (max-width: 40rem) {
  main {
    display: block;
    overflow: auto; }
    main::-webkit-scrollbar {
      width: 0px !important;
      height: 0px !important; }
  .pagination-box {
    margin: 0 .3rem !important; }
  aside {
    margin-right: 1rem !important;
    margin-bottom: 0 !important; }
  article.markdown {
    padding: 1rem !important; } }
</style>
  
</head>

<body>
  <main>
  
<aside class='meta'>
  <div class='author'>
    <a href="../../../../"><img src='../../../../images/NetPipe.png'></a>
    <h2 class='name'>Net Pipe</h2>
  </div>

  <div class="data">
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    <div class='data-box'>
      <h3>59</h3>
      <span>Posts</span>
    </div>
    <div class='data-box'>
      <h3>56246</h3>
      <span>Words</span>
    </div>
  </div>

  <div class="social">
    <a class="silent">
      <div class="social-box">
        <img src="../../../../images/search.svg"/>
        <div class="search">
          <input type="text" placeholder="Search" id="search-key" maxlength="64" data-hotkeys="s/" onkeydown="keyup_submit(event);" />
        </div>
      </div>
      <script>
        function keyup_submit(e){ 
        var evt = window.event || e; 
          if (evt.keyCode == 13) {
            window.location.href = '/s?wd=' + document.getElementById("search-key").value;
          }
        }
      </script>
    </a>
    <a class="silent" href="../../../../">
      <div class="social-box"><img src="../../../../images/home.svg"/><span>Home</span></div>
    </a>
    <a class="silent" href="../../../../post/">
      <div class="social-box"><img src="../../../../images/posts.svg"/><span>Posts</span></div>
    </a>
    <a class="silent" type="application/rss+xml" href="../../../../index.xml">
      <div class="social-box"><img src="../../../../images/rss.svg"/><span>RSS</span></div>
    </a>
  </div>

  <div class="tags">
    <h2 class='alt'><img class='alt' src="../../../../images/categories.svg" />Tags</h2>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E5%AD%A6/">基础数学</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/dp/">DP</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E4%BF%A1%E6%81%AF%E5%AD%A6/">信息学</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E6%95%B0%E8%AE%BA/">数论</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/">组合数学</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E5%9B%BE%E8%AE%BA/">图论</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E5%AD%97%E7%AC%A6%E4%B8%B2/">字符串</a>
</div>

<div class="tag-card">
  <a class="silent" href="../../../../categories/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/">基础算法</a>
</div>

  </div>
</aside>
<aside class='toc'>
  <h2 class='alt'><img class='alt' src='../../../../images/notice.svg'>Notice</h2>
<ul>
<li>本站还处于建设中</li>
<li>部分 URL 存在跳转错误</li>
</ul>

<br>
  
    <h2 class='alt'><img class='alt' src='../../../../images/toc.svg'>Menu</h2>
<nav id="TableOfContents">
  <ul>
    <li><a href="#01-背包">01 背包</a>
      <ul>
        <li><a href="#空间优化">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#完全背包">完全背包</a>
      <ul>
        <li><a href="#空间优化-1">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#多重背包">多重背包</a>
      <ul>
        <li><a href="#二进制优化">二进制优化</a></li>
      </ul>
    </li>
    <li><a href="#分组背包">分组背包</a></li>
    <li><a href="#二维背包">二维背包</a></li>
    <li><a href="#方案总数">方案总数</a></li>
    <li><a href="#最优方案总数">最优方案总数</a></li>
  </ul>
</nav>
  
</aside>

  
<article class='markdown'>
<div class='content'>
  
  <h1>背包问题</h1>
  
  <span class="post-meta">
    
    <img class='alt' src="../../../../images/time.svg"></img>
    Jan 19, 2021
    
  </span>

  
  <div class='tag-card'>
    <a class='silent' href="../../../../categories/%e4%bf%a1%e6%81%af%e5%ad%a6/">信息学</a>
  </div>
  
  <div class='tag-card'>
    <a class='silent' href="../../../../categories/dp/">DP</a>
  </div>
  

  
  <div class='post-toc'>
  <h2 class='alt'><img class='alt' src='../../../../images/toc.svg'>Menu</h2>
<nav id="TableOfContents">
  <ul>
    <li><a href="#01-背包">01 背包</a>
      <ul>
        <li><a href="#空间优化">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#完全背包">完全背包</a>
      <ul>
        <li><a href="#空间优化-1">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#多重背包">多重背包</a>
      <ul>
        <li><a href="#二进制优化">二进制优化</a></li>
      </ul>
    </li>
    <li><a href="#分组背包">分组背包</a></li>
    <li><a href="#二维背包">二维背包</a></li>
    <li><a href="#方案总数">方案总数</a></li>
    <li><a href="#最优方案总数">最优方案总数</a></li>
  </ul>
</nav>
  </div>
  

  

  <h2 id="01-背包">01 背包 <a class="anchor" href="#01-%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>给定 $n$ 个物品，第 $i$ 个物品体积为 $c[i]$, 价值为 $w[i]$. 现有容积为 $m$ 的背包，求将物品装入背包得到的最大价值.</p>
</blockquote>
<p>$f[i,v]$: 从前 $i$ 个物品中，选出总体积为 $v$ 的物品，能得到的最大价值.</p>
<ul>
<li>不选第 $i$ 个物品：$f[i,v]=f[i-1,v]$.</li>
<li>选第 $i$ 个物品：$f[i,v]=f[i-1,v-w_i]+c_i$.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[i,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[i-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[i-1,v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)<span style="color:#728e00">\\</span>
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>时间复杂度：$O(nm)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>) {
        <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
    }
}
<span style="color:#95a5a6">// 问题的解是 f[n][m]
</span></code></pre></div><h3 id="空间优化">空间优化 <a class="anchor" href="#%e7%a9%ba%e9%97%b4%e4%bc%98%e5%8c%96">¶</a></h3><p>实际上，<a href="../../../../post/dynamic-programming/dynamic-programming/#state-transition-equation">状态转移方程</a> 的第一维可以去掉，即让新状态覆盖旧状态，以降低空间开销.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>但在程序中，直接移除第一维会导致错误. 令 $w=1,c=2$，执行内层循环，可见错误的根源.</p>





<div class="book-tabs"><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-0" checked="checked" />
  <label for="tabs-%!s(int=1)-0">$v=1$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-1"  />
  <label for="tabs-%!s(int=1)-1">$v=2$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{2}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=4$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-2"  />
  <label for="tabs-%!s(int=1)-2">$v=3$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$\textcolor{blue}{4}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=6$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-3"  />
  <label for="tabs-%!s(int=1)-3">$v=4$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$4$</td>
<td style="text-align:center">$\textcolor{blue}{6}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=8$</td>
</tr>
</tbody>
</table>
</div></div>

<p>在内层循环中，$f[v-w]$ 不能比 $f[v]$ 先更新，否则相当于同一物品被装多次. 倒序枚举 $v$ 以解决问题.</p>





<div class="book-tabs"><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-0" checked="checked" />
  <label for="tabs-%!s(int=2)-0">$v=4$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-1"  />
  <label for="tabs-%!s(int=2)-1">$v=3$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$2$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-2"  />
  <label for="tabs-%!s(int=2)-2">$v=2$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$2$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-3"  />
  <label for="tabs-%!s(int=2)-3">$v=1$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$2$</td>
</tr>
</tbody>
</table>
</div></div>

<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)    <span style="color:#95a5a6">// 倒序枚举
</span><span style="color:#95a5a6"></span>        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="完全背包">完全背包 <a class="anchor" href="#%e5%ae%8c%e5%85%a8%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，每种物品可装无限次.</p>
</blockquote>
<p>$f[i,v]$: 从前 $i$ 种物品中，选出总体积为 $v$ 的物品，能得到的最大价值.</p>
<ul>
<li>不选第 $i$ 种物品：$f[i,v]=f[i-1,v]$.</li>
<li>多选一个第 $i$ 种物品：$f[i,v]=f[i,v-w_i]+c_i$.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[i,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[i-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[i,v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>时间复杂度：$O(nm)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>) {
        <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
    }
}
</code></pre></div><h3 id="空间优化-1">空间优化 <a class="anchor" href="#%e7%a9%ba%e9%97%b4%e4%bc%98%e5%8c%96-1">¶</a></h3><p>参照 <a href="#%E7%A9%BA%E9%97%B4%E4%BC%98%E5%8C%96">01 背包 - 空间优化</a> 中的错误做法：直接移除第一维，并升序枚举 $v$，相当于将同种物品装多次.</p>





<div class="book-tabs"><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-0" checked="checked" />
  <label for="tabs-%!s(int=3)-0">$v=1$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-1"  />
  <label for="tabs-%!s(int=3)-1">$v=2$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{2}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=4$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-2"  />
  <label for="tabs-%!s(int=3)-2">$v=3$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$\textcolor{blue}{4}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=6$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-3"  />
  <label for="tabs-%!s(int=3)-3">$v=4$</label>
  <div class="book-tabs-content"><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$4$</td>
<td style="text-align:center">$\textcolor{blue}{6}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=8$</td>
</tr>
</tbody>
</table>
</div></div>

<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>)
        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="多重背包">多重背包 <a class="anchor" href="#%e5%a4%9a%e9%87%8d%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，第 $i$ 种物品可装 $s_i$ 次.</p>
</blockquote>
<p>在内层循环中，分别绑定 $1,2,\cdots s_i$ 个物品作为一个物品，参与 01 背包.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[v] = <span style="color:#728e00">\max</span><span style="color:#728e00">_{</span>k=1,2,<span style="color:#728e00">\cdots</span>,s<span style="color:#728e00">_</span>i<span style="color:#728e00">}</span><span style="color:#728e00">\begin</span><span style="color:#728e00">{</span>cases<span style="color:#728e00">}</span>
f[v]<span style="color:#728e00">\\</span>
f[v-k<span style="color:#728e00">\cdot</span> w<span style="color:#728e00">_</span>i]+k<span style="color:#728e00">\cdot</span> c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥k<span style="color:#728e00">\cdot</span> w<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>cases<span style="color:#728e00">}</span>
</code></pre></div><p>时间复杂度：$O(m\sum s_i)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
        <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">k</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">s</span>[<span style="color:#434f54">i</span>] <span style="color:#728e00">&amp;&amp;</span> <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">k</span> <span style="color:#728e00">++</span>)
            <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h3 id="二进制优化">二进制优化 <a class="anchor" href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e4%bc%98%e5%8c%96">¶</a></h3><ul>
<li>任意正整数 $n$ 可拆分为 $1,2,4,\cdots,2^k,n-2^k$（$n-2^k≥0$ 且 $k$ 尽量大）.</li>
<li>相反，$1,2,4,\cdots,2^k,n-2^k$ 能且仅能组合出 $[1,n]$ 中的所有整数.</li>
</ul>
<p>将 $s_i$ 个物品拆分为 $1,2,4,\cdots,2^k,s_i-2^k$ 个物品（共 $\log s_i$ 组），并绑定每组为一个物品，参与 01 背包.
例如，$s_i=15$ 可以拆分为以下 $4$ 组：</p>
<table>
<thead>
<tr>
<th style="text-align:center">组别</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">总体积</td>
<td style="text-align:center">$w_i$</td>
<td style="text-align:center">$2w_i$</td>
<td style="text-align:center">$4w_i$</td>
<td style="text-align:center">$8w_i$</td>
</tr>
<tr>
<td style="text-align:center">总价值</td>
<td style="text-align:center">$c_i$</td>
<td style="text-align:center">$2c_i$</td>
<td style="text-align:center">$4c_i$</td>
<td style="text-align:center">$8c_i$</td>
</tr>
</tbody>
</table>
<p>此 $4$ 组物品可组合出所有策略（选 $1\cdots 15$ 个物品）. 例如要选 $12$ 个物品，则同时选第 $3,4$ 组即可.</p>
<p>时间复杂度：$O(m\sum\log{s_i})$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#00979d">int</span> <span style="color:#434f54">wi</span>, <span style="color:#434f54">ci</span>, <span style="color:#434f54">s</span>;
    <span style="color:#434f54">cin</span> <span style="color:#728e00">&gt;&gt;</span> <span style="color:#434f54">wi</span> <span style="color:#728e00">&gt;&gt;</span> <span style="color:#434f54">ci</span> <span style="color:#728e00">&gt;&gt;</span> <span style="color:#434f54">s</span>;
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">k</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">s</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">*=</span> <span style="color:#8a7b52">2</span>) {
        <span style="color:#434f54">w</span>[<span style="color:#728e00">++</span> <span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">wi</span>, <span style="color:#434f54">c</span>[<span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">ci</span>;
        <span style="color:#434f54">s</span> <span style="color:#728e00">-=</span> <span style="color:#434f54">k</span>;
    }
    <span style="color:#728e00">if</span> (<span style="color:#434f54">s</span>)
        <span style="color:#434f54">w</span>[<span style="color:#728e00">++</span> <span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">s</span> <span style="color:#728e00">*</span> <span style="color:#434f54">wi</span>, <span style="color:#434f54">c</span>[<span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">s</span> <span style="color:#728e00">*</span> <span style="color:#434f54">ci</span>;
}
<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">tot</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="分组背包">分组背包 <a class="anchor" href="#%e5%88%86%e7%bb%84%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>背包体积为 $m$，有 $t$ 组物品，第 $k$ 组有 $s_k$ 个，其中第 $i$ 个体积为 $w_{ki}$，价值为 $c_{ki}$. 每组只能取走一个物品. 求将物品装入背包得到的最大价值.</p>
</blockquote>
<p>$f[k,v]$：从前 $k$ 组物品中，选出总体积为 $v$ 的物品，能得到的最大价值.</p>
<ul>
<li>不选第 $k$ 组：$f[k,v]=f[k-1,v]$.</li>
<li>选第 $k$ 组：$\su f[k,v]=\max_{1\leq i\leq s_k}\ f[k-1,v-w_{ki}]+c_{ki}$.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[k,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[k-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span><span style="color:#728e00">\max</span><span style="color:#728e00">_{</span>1<span style="color:#728e00">\leq</span> i<span style="color:#728e00">\leq</span> s<span style="color:#728e00">_</span>k<span style="color:#728e00">}</span><span style="color:#728e00">\ </span>f[k-1,v-w<span style="color:#728e00">_{</span>ki<span style="color:#728e00">}</span>]+c<span style="color:#728e00">_{</span>ki<span style="color:#728e00">}</span><span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_{</span>ki<span style="color:#728e00">}</span>)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>可以省去第一维. 时间复杂度：$O(nm)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">k</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">t</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">++</span>)
	<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
		<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">s</span>[<span style="color:#434f54">k</span>]; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
			<span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">k</span>][<span style="color:#434f54">i</span>])
				<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>],<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">k</span>][<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">k</span>][<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="二维背包">二维背包 <a class="anchor" href="#%e4%ba%8c%e7%bb%b4%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>背包体积为 $V$，承重为 $M$. 有 $n$ 个物品，第 $i$ 个体积为 $v_i$，质量为 $m_i$，价值为 $c_i$. 求将物品装入背包得到的最大价值.</p>
</blockquote>
<p>$f[p,q]$：用体积为 $p$，承重为 $q$ 的背包放物品，能获得的最大总价值.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[p,q] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[p,q]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[p-v<span style="color:#728e00">_</span>i,q-m<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(p≥v<span style="color:#728e00">_</span>i,q≥m<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>时间复杂度为 $O(nVM)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">p</span> <span style="color:#728e00">=</span> <span style="color:#434f54">V</span>; <span style="color:#434f54">p</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">v</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">p</span> <span style="color:#728e00">--</span>)
        <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">q</span> <span style="color:#728e00">=</span> <span style="color:#434f54">M</span>; <span style="color:#434f54">q</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">m</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">q</span> <span style="color:#728e00">--</span>)
            <span style="color:#434f54">f</span>[<span style="color:#434f54">p</span>][<span style="color:#434f54">q</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">p</span>][<span style="color:#434f54">q</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">p</span> <span style="color:#728e00">-</span> <span style="color:#434f54">v</span>[<span style="color:#434f54">i</span>]][<span style="color:#434f54">q</span> <span style="color:#728e00">-</span> <span style="color:#434f54">m</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="方案总数">方案总数 <a class="anchor" href="#%e6%96%b9%e6%a1%88%e6%80%bb%e6%95%b0">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，求将物品放入背包的方案数.</p>
</blockquote>
<p>$g[i,v]$：把前 $i$ 个物品（部分或全部）放入体积为 $v$ 的背包的方案总数.</p>
<ul>
<li>不放第 $i$ 个物品：有 $g[i-1,v]$ 种</li>
<li>放第 $i$ 个物品：有 $g[i-1,v-w_i]$ 种</li>
</ul>
<p>$$g[i,v]=g[i-1,v]+g[i-1,v-w_i]$$</p>
<p>同样可以省去第一维：</p>
<p>$$g[v]=g[v]+g[v-w_i]\quad(v≥w_i)$$</p>
<p>初始条件：$g[0]=1$. 因为当背包体积为 $0$ 时只有一个方案：不放任何物品.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#434f54">g</span>[<span style="color:#8a7b52">0</span>] <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>;
<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
        <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]];
</code></pre></div><h2 id="最优方案总数">最优方案总数 <a class="anchor" href="#%e6%9c%80%e4%bc%98%e6%96%b9%e6%a1%88%e6%80%bb%e6%95%b0">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，求最优方案数.</p>
</blockquote>
<p>已知 01 背包 的状态转移方程：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[i,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[i-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[i-1,v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)<span style="color:#728e00">\\</span>
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>$g[i,v]$：把前 $i$ 个物品（部分或全部）放入体积为 $v$ 的背包的最优方案数.</p>
<ul>
<li>
<p>若 $f[i-1,v]&gt;f[i-1,v-w_i]+c_i$，不放物品 $i$ 最优：$g[i,v]=g[i-1,v]$.</p>
</li>
<li>
<p>若 $f[i-1,v]&lt;f[i-1,v-w_i]+c_i$，放物品 $i$ 最优：$g[i,v]=g[i-1,v-w_i]$.</p>
</li>
<li>
<p>若相等，则两种方案都最优：$g[i,v]=g[i-1,v]+g[i-1,v-w_i]$.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>) {
        <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
        <span style="color:#728e00">if</span> (<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>])
            <span style="color:#434f54">g</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">g</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]];
    }
}
</code></pre></div><p>省去第一维：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>) {
        <span style="color:#00979d">int</span> <span style="color:#434f54">maxn</span> <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
        <span style="color:#00979d">int</span> <span style="color:#434f54">maxg</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#95a5a6">// 最优方案数
</span><span style="color:#95a5a6"></span>        <span style="color:#728e00">if</span>(<span style="color:#434f54">maxn</span> <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>])
            <span style="color:#434f54">maxg</span> <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span>(<span style="color:#434f54">maxn</span> <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">maxg</span> <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]];
        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">maxn</span>, <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">maxg</span>;
    }
}
</code></pre></div>
</div>

</article>

  </main>

  <script src="../../../../js/jquery.min.js"></script>



<script defer>
function IsPC() {  
  var userAgentInfo = navigator.userAgent;
  var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");  
  for (var v = 0; v < Agents.length; v ++) {  
    if (userAgentInfo.indexOf(Agents[v]) > 0) {
      return false;
    }
  }
  return true;
}
function detectZoom() {
  var ratio = 0,
  screen = window.screen,
  ua = navigator.userAgent.toLowerCase();
  if (window.devicePixelRatio !== undefined)
    ratio = window.devicePixelRatio;
  else if (~ua.indexOf('msie')) {
    if (screen.deviceXDPI && screen.logicalXDPI)
      ratio = screen.deviceXDPI / screen.logicalXDPI;
  }
  else if (window.outerWidth !== undefined && window.innerWidth !== undefined)
    ratio = window.outerWidth / window.innerWidth;
  
  if (ratio)
    ratio = Math.round(ratio * 100);
  return ratio;
}
$('.markdown').find('img').each(function(id, el, arr) {
  if (el.className == 'alt')
    return;
  el.className = "md__image";
  var src = el.getAttribute('src');
  if (IsPC()) {
    if (el.style.zoom)
      el.style.zoom = parseFloat(el.style.zoom) / detectZoom();
    else
      el.style.zoom = 100 / detectZoom();
  }
});
</script>



<link rel="stylesheet" href="../../../../katex/katex.min.css">
<script src="../../../../katex/katex.min.js"></script>
<script src="../../../../katex/auto-render.min.js"></script>

<script>
function renderTex() {
  renderMathInElement(document.body, {
    trust: true,
    delimiters: [
      { left: "$$", right: "$$", display: true },
      { left: "$", right: "$", display: false }
    ],
    macros: {
      
      "\\d": "\\text{d}",
      "\\zh": "\\footnotesize \\ ",
      "\\en": "\\normalsize \\ ",
      "\\su": "\\displaystyle",
      "\\eq": "\\Longleftrightarrow",
      "\\intro": "\\Longrightarrow",
      "\\mathring": "\\overset\{\\normalsizeₒ\}",
      "\\arccot": "\\text\{arccot\} \\, ",
      "\\xor": "\\text\{xor\} \\, ",
      "\\mex": "\\text\{mex\} \\, "
    }
  });
}  
document.addEventListener("DOMContentLoaded", function() {
  renderTex();
});
$('.language-latex').each(function(id, el, arr) {
  function toText(text) { 
    var temp = document.createElement("div"); 
    temp.innerHTML = text; 
    var output = temp.innerText || temp.textContent; 
    temp = null; 
    return output; 
  } 
  tex = toText(el.innerHTML);
  el.parentElement.outerHTML = '<div>$$' + tex + '$$</div>';
});
</script>


<script>
$(window).scroll(function(e) {
  if ($('main').css('display') == 'flex')
    $(this).scrollTop(0);
});
$('main').scroll(function(e) {
  if ($('main').css('display') == 'flex')
    $(this).scrollTop(0);
});
document.body.scroll="no";
</script>
</body>

</html>