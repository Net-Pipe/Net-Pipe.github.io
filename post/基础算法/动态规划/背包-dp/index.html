<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>背包问题 &#8211; NetPipe&#39;s Blog</title>

  
  <meta name="description" content="01 背包 ¶ 给定 $n$ 个物品，第 $i$ 个物品体积为 $c[i]$, 价值为 $w[i]$.">
  
  <meta name="author" content="Net Pipe">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="../../../../index.xml" rel="alternate" type="application/rss+xml" title="NetPipe&#39;s Blog" />
  <link rel="shortcut icon" type="image/x-icon" href="../../../../images/freeze.png" />

  
    <style>@font-face {
  font-family: 'Fantasque Sans Mono';
  src: url("/fonts/FantasqueSansMono-Regular.woff2") format("woff2"); }

@font-face {
  font-family: 'Fantasque Sans Mono';
  font-style: normal;
  font-weight: bold;
  src: url("/fonts/FantasqueSansMono-Bold.woff2") format("woff2"); }

@font-face {
  font-family: 'Fantasque Sans Mono';
  font-style: italic;
  src: url("/fonts/FantasqueSansMono-Italic.woff2") format("woff2"); }

@font-face {
  font-family: 'Lazy';
  src: url("/fonts/lazy.ttf") format("truetype"); }

@font-face {
  font-family: 'Material Icons';
  font-style: normal;
  font-weight: 400;
  src: url("/fonts/Material Icons.woff2") format("woff2"); }

/* fallback */
@font-face {
  font-family: 'Material Icons Outlined';
  font-style: normal;
  font-weight: 400;
  src: url("/fonts/Material Icons Outlined.woff2") format("woff2"); }

/* fallback */
@font-face {
  font-family: 'Material Icons Round';
  font-style: normal;
  font-weight: 400;
  src: url("/fonts/Material Icons Round.woff2") format("woff2"); }

/* fallback */
@font-face {
  font-family: 'Material Icons Sharp';
  font-style: normal;
  font-weight: 400;
  src: url("/fonts/Material Icons Sharp.woff2") format("woff2"); }

/* fallback */
@font-face {
  font-family: 'Material Icons Two Tone';
  font-style: normal;
  font-weight: 400;
  src: url("/fonts/Material Icons Two Tone.woff2") format("woff2"); }

.material-icons {
  font-family: 'Material Icons';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased; }

.material-icons-outlined {
  font-family: 'Material Icons Outlined';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased; }

.material-icons-round {
  font-family: 'Material Icons Round';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased; }

.material-icons-sharp {
  font-family: 'Material Icons Sharp';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased; }

.material-icons-two-tone {
  font-family: 'Material Icons Two Tone';
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: 'liga';
  -webkit-font-smoothing: antialiased; }

body,
code,
input {
  font-family: 'Fantasque Sans Mono', sans-serif;
  -webkit-font-smoothing: antialiased; }
  body article h1, body article h2, body article h3, body article h4, body article h5, body article h6, body .posts h1, body .posts h2, body .posts h3, body .posts h4, body .posts h5, body .posts h6,
  code article h1,
  code article h2,
  code article h3,
  code article h4,
  code article h5,
  code article h6,
  code .posts h1,
  code .posts h2,
  code .posts h3,
  code .posts h4,
  code .posts h5,
  code .posts h6,
  input article h1,
  input article h2,
  input article h3,
  input article h4,
  input article h5,
  input article h6,
  input .posts h1,
  input .posts h2,
  input .posts h3,
  input .posts h4,
  input .posts h5,
  input .posts h6 {
    font-weight: normal; }

strong {
  font-weight: normal;
  text-shadow: 0 0; }

* {
  margin: 0;
  padding: 0;
  user-select: none;
  -moz-user-select: none;
  -webkit-user-select: none;
  --aside-width: 18rem;
  --box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.1);
  --box-shadow-hover: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  --color: black;
  --border: 1px solid #dee0e2;
  --border-color: #dee0e2;
  --border-radius: 0.25rem;
  --link-color: #4588be;
  --category-color: rgba(72, 175, 209, 0.7);
  --background-color: white;
  --hover-color: #f7f7f7; }
  * body {
    background-color: #f7f7f7; }

::selection {
  background-color: #CCE2FF;
  color: rgba(0, 0, 0, 0.87); }

::-webkit-scrollbar {
  width: 7px;
  height: 7px; }

::-webkit-scrollbar-thumb {
  border-radius: 10px;
  background: #dddddd; }
  ::-webkit-scrollbar-thumb:hover {
    background: #acacac; }

::-webkit-scrollbar-track {
  border-radius: 10px;
  background: #f0f0f0; }

a {
  text-decoration: none;
  color: #4794d3; }

a:focus, a:hover {
  outline: none;
  text-decoration: underline; }

a.alternate:focus,
a.alternate:hover,
a.alternate:focus > *,
a.alternate:hover > * {
  text-decoration: none;
  background: var(--hover-color); }

small {
  font-size: 70%; }

ol, ul {
  margin: .5rem 0;
  padding-left: 2rem;
  word-break: break-word; }
  ol > li, ul > li {
    margin: .5rem 0; }

ul > li {
  list-style: circle; }

.result {
  width: 100%; }
  .result :first-child .post {
    margin-top: 0; }
  .result :last-child .post {
    margin-bottom: 0; }

.pagination {
  margin: 0;
  padding: 0;
  width: 100%;
  display: flex;
  flex-flow: row nowrap;
  align-items: center;
  justify-content: center;
  font-size: 18px; }
  .pagination div.pagination-box {
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    background-color: var(--background-color);
    color: var(--color);
    margin: 0 .5rem;
    color: var(--link-color);
    width: 2rem;
    height: 2rem;
    line-height: 2rem;
    float: left;
    text-align: center;
    vertical-align: middle;
    cursor: default; }
    .pagination div.pagination-box:hover {
      box-shadow: var(--box-shadow-hover); }
    .pagination div.pagination-box:not(.disabled):hover {
      background-color: var(--hover-color);
      cursor: pointer; }
  .pagination div.prev {
    width: 5rem;
    margin-left: 0; }
  .pagination div.next {
    width: 5rem;
    margin-right: 0; }
  .pagination div.pagination-eldivpsis {
    width: 3rem; }
  .pagination div.disabled {
    color: var(--color); }

.posts .post {
  border-radius: var(--border-radius);
  box-shadow: var(--box-shadow);
  background-color: var(--background-color);
  color: var(--color);
  margin: 1rem 0;
  padding: .7rem 1rem; }
  .posts .post:hover {
    box-shadow: var(--box-shadow-hover); }

.posts :first-child .post {
  margin-top: 0; }

.post-list {
  border: var(--border);
  border-radius: var(--border-radius); }
  .post-list .post-item {
    padding: .3rem .5rem;
    height: 1.5rem; }
    .post-list .post-item * {
      font-size: 100%;
      vertical-align: bottom; }
    .post-list .post-item:hover a {
      color: var(--link-color);
      text-decoration: underline; }

.post-link {
  color: var(--color); }
  .post-link:hover .post-title a {
    color: var(--link-color);
    text-decoration: underline; }

.post-title {
  margin: 0 0 .5rem 0;
  font-size: 20px; }
  .post-title a {
    color: var(--color); }
  .post-title:hover a {
    color: var(--link-color);
    text-decoration: underline; }

.post-meta {
  color: gray; }
  .post-meta img {
    vertical-align: text-bottom; }

.post-categories {
  font-size: 13px; }
  .post-categories a {
    color: white;
    background-color: var(--category-color);
    border-radius: .2rem;
    padding: .2rem .2rem;
    white-space: nowrap; }

.post-summary {
  margin-top: .5rem; }

.post-header {
  margin-bottom: 1rem; }

.post-content {
  text-align: justify;
  background-color: white;
  padding: 1rem; }
  .post-content .md__image {
    display: block;
    max-width: 100%;
    margin: auto; }

.post-content > :first-child,
.post-content > :first-child > :first-child,
.post-content > :first-child > :first-child > :first-child,
.markdown-inner > :first-child,
.markdown-inner > :first-child > :first-child,
.markdown-inner > :first-child > :first-child > :first-child {
  margin-top: 0; }

.post-content > :last-child,
.post-content > :last-child > :last-child,
.post-content > :last-child > :last-child > :last-child,
.markdown-inner > :last-child,
.markdown-inner > :last-child > :last-child,
.markdown-inner > :last-child > :last-child > :last-child {
  margin-bottom: 0; }

.flex-left,
.flex-right {
  flex: 0 0 var(--aside-width); }
  .flex-left div.outer,
  .flex-right div.outer {
    padding: .7rem;
    margin: .3rem;
    width: calc(var(--aside-width) - 2rem);
    height: calc(100% - 2rem);
    position: fixed;
    overflow: auto; }
    .flex-left div.outer::-webkit-scrollbar-track,
    .flex-right div.outer::-webkit-scrollbar-track {
      margin: .7rem; }
    .flex-left div.outer div.avatar,
    .flex-right div.outer div.avatar {
      text-align: center; }
      .flex-left div.outer div.avatar h2,
      .flex-right div.outer div.avatar h2 {
        margin: 1rem; }
      .flex-left div.outer div.avatar .data-left,
      .flex-left div.outer div.avatar .data-right,
      .flex-right div.outer div.avatar .data-left,
      .flex-right div.outer div.avatar .data-right {
        flex: 0 0 50%;
        display: inline-block;
        width: calc(50% - 1rem); }
      .flex-left div.outer div.avatar .data-left,
      .flex-right div.outer div.avatar .data-left {
        border-right: 1px solid var(--color); }
      .flex-left div.outer div.avatar .social,
      .flex-right div.outer div.avatar .social {
        margin-top: 1rem; }
        .flex-left div.outer div.avatar .social .social-box,
        .flex-right div.outer div.avatar .social .social-box {
          border-radius: var(--border-radius);
          box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.2);
          transition: all .3s;
          background-color: var(--background-color);
          color: var(--color);
          margin-top: .5rem;
          padding: .5rem;
          text-align: left;
          font-size: 18px; }
          .flex-left div.outer div.avatar .social .social-box:hover,
          .flex-right div.outer div.avatar .social .social-box:hover {
            transform: scale(1.03); }
          .flex-left div.outer div.avatar .social .social-box a,
          .flex-right div.outer div.avatar .social .social-box a {
            color: var(--color); }
          .flex-left div.outer div.avatar .social .social-box:hover a,
          .flex-right div.outer div.avatar .social .social-box:hover a {
            color: var(--link-color);
            text-decoration: underline; }
          .flex-left div.outer div.avatar .social .social-box img,
          .flex-right div.outer div.avatar .social .social-box img {
            vertical-align: text-bottom;
            width: 20px; }
          .flex-left div.outer div.avatar .social .social-box .search,
          .flex-right div.outer div.avatar .social .social-box .search {
            display: inline-block;
            width: calc(100% - 36px); }
            .flex-left div.outer div.avatar .social .social-box .search > input,
            .flex-right div.outer div.avatar .social .social-box .search > input {
              background-color: var(--background-color);
              color: var(--color);
              border: none;
              font-size: 17px;
              outline: none;
              width: 100%; }
    .flex-left div.outer div.categories .post-categories,
    .flex-right div.outer div.categories .post-categories {
      margin: .5rem 0;
      line-height: 1.7rem; }
    .flex-left div.outer #TableOfContents > ul,
    .flex-right div.outer #TableOfContents > ul {
      padding-left: 0;
      margin-bottom: 0; }
      .flex-left div.outer #TableOfContents > ul li,
      .flex-right div.outer #TableOfContents > ul li {
        list-style: none; }
        .flex-left div.outer #TableOfContents > ul li:last-of-type,
        .flex-right div.outer #TableOfContents > ul li:last-of-type {
          margin-bottom: 0; }
  .flex-left div.inner,
  .flex-right div.inner {
    direction: ltr;
    background-color: var(--background-color);
    color: var(--color);
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    box-sizing: border-box;
    width: calc(var(--aside-width) - 2rem);
    padding: .5rem;
    margin-bottom: 1rem;
    overflow: auto;
    padding: 1rem; }
    .flex-left div.inner:hover,
    .flex-right div.inner:hover {
      box-shadow: var(--box-shadow-hover); }
    .flex-left div.inner h2,
    .flex-right div.inner h2 {
      margin: 0 0 .5rem 0;
      line-height: 20px; }
      .flex-left div.inner h2 > img,
      .flex-right div.inner h2 > img {
        vertical-align: -2px;
        width: 20px;
        height: 20px;
        margin-right: .5rem; }
    .flex-left div.inner ul,
    .flex-right div.inner ul {
      padding-left: 1rem; }
    .flex-left div.inner:last-of-type,
    .flex-right div.inner:last-of-type {
      margin-bottom: 0; }

.flex-left {
  margin-right: -1rem; }

.flex-right {
  margin-left: -1rem; }

.flex-hidden {
  display: none; }

body {
  max-width: 75rem;
  margin: 0 auto;
  overflow: hidden scroll; }

main {
  display: flex; }

article {
  overflow: hidden;
  will-change: transform; }

.blog-page {
  flex-grow: 1;
  min-width: 18rem;
  padding: 1rem;
  width: calc(100% - 42rem); }
  .blog-page .post-toc {
    display: none; }
  .blog-page .post-pagination {
    width: 100%;
    height: 2rem; }
  .blog-page .post-content {
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    background-color: var(--background-color);
    color: var(--color); }
    .blog-page .post-content:hover {
      box-shadow: var(--box-shadow-hover); }

@media screen and (max-width: 70rem) {
  .flex-left .flex-visible {
    margin-bottom: 1rem; }
  .flex-left .flex-hidden {
    display: block; }
  .flex-right {
    display: none; } }

@media screen and (max-width: 48rem) {
  main {
    display: block; }
  .flex-left {
    width: 100%;
    margin: 0;
    margin-bottom: -1rem; }
    .flex-left div.outer {
      position: relative;
      width: auto; }
    .flex-left div.inner {
      width: auto; }
  .blog-page {
    width: calc(100% - 2rem); } }

@media screen and (max-width: 25rem) {
  .pagination div.pagination-box {
    margin: 0 .25rem; } }

.book-columns {
  display: flex;
  flex-wrap: wrap;
  margin: .5rem;
  margin-left: -.5rem;
  margin-right: -.5rem; }
  .book-columns .markdown-inner {
    margin: .5rem;
    flex: 1 1; }

.book-tabs {
  margin: .5em 0;
  overflow: hidden;
  display: flex;
  flex-wrap: wrap; }
  .book-tabs label {
    line-height: 1rem;
    display: inline-block;
    padding: .3rem 16px;
    border-top-left-radius: var(--border-radius);
    border-top-right-radius: var(--border-radius);
    cursor: pointer;
    z-index: 999;
    border: 1px solid transparent;
    vertical-align: baseline; }
  .book-tabs .book-tabs-content,
  .book-tabs .book-tabs-pure-content {
    order: 999;
    width: 100%;
    display: none;
    overflow: hidden;
    border-bottom-left-radius: var(--border-radius);
    border-bottom-right-radius: var(--border-radius); }
  .book-tabs .book-tabs-content {
    border: var(--border);
    padding: .5rem; }
  .book-tabs input[type="radio"] {
    display: none; }
    .book-tabs input[type="radio"]:not(:checked) + label {
      color: #95A5A6; }
      .book-tabs input[type="radio"]:not(:checked) + label:hover {
        background-color: var(--hover-color); }
    .book-tabs input[type="radio"]:checked + label {
      border: var(--border);
      border-bottom: none; }
      .book-tabs input[type="radio"]:checked + label + .book-tabs-content, .book-tabs input[type="radio"]:checked + label + .book-tabs-pure-content {
        display: block; }
    .book-tabs input[type="radio"]:first-of-type:checked + label + .book-tabs-pure-content :first-child {
      border-top-left-radius: 0; }

details {
  border: var(--border);
  border-radius: var(--border-radius);
  margin: .5rem 0;
  padding: .5rem  1rem .5rem  0.75rem; }
  details summary {
    font-size: 12.8px;
    font-weight: bold; }
    details summary::marker {
      content: '';
      font-size: 0; }
  details ::-webkit-details-marker {
    content: '';
    font-size: 0; }
  details ::-moz-list-bullet {
    content: '';
    font-size: 0; }
  details label {
    font-size: 20px !important;
    margin-left: -5px;
    margin-right: 5px;
    vertical-align: -4.5px; }
  details[open] > summary {
    margin-bottom: 0; }
    details[open] > summary label {
      transform: rotate(90deg); }
  details .markdown-inner {
    padding: .5rem 0; }
  details:focus {
    outline: none; }

article h1 {
  font-size: 200%;
  line-height: 110%; }

article h2 {
  font-size: 140%;
  line-height: 120%; }

article h3 {
  font-size: 120%;
  line-height: 120%; }
  article h3 .katex {
    font-size: 100%; }

article h4 {
  font-size: 110%; }

article p {
  margin: .5rem 0;
  line-height: 1.5rem; }

article h1, article h2, article h3, article h4, article h5, article h6 {
  margin: .7rem 0; }
  article h1 .anchor, article h2 .anchor, article h3 .anchor, article h4 .anchor, article h5 .anchor, article h6 .anchor {
    opacity: 0; }
  article h1:hover .anchor, article h1:focus .anchor, article h2:hover .anchor, article h2:focus .anchor, article h3:hover .anchor, article h3:focus .anchor, article h4:hover .anchor, article h4:focus .anchor, article h5:hover .anchor, article h5:focus .anchor, article h6:hover .anchor, article h6:focus .anchor {
    opacity: 1; }

article hr {
  border: none;
  border-bottom: 1px solid #ebeced; }

article blockquote {
  border: var(--border);
  border-radius: var(--border-radius);
  border-left: .3rem solid lightgray;
  padding: 0 .5rem; }

article pre {
  border: var(--border);
  border-radius: var(--border-radius);
  margin: .5rem 0;
  padding: .5rem 1rem;
  overflow-x: auto;
  line-height: 22px; }

article code {
  border: var(--border);
  border-radius: var(--border-radius);
  padding: 1px 2px; }

article pre {
  color: #686868; }
  article pre code {
    border: none;
    padding: 0; }
  article pre * {
    user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text; }

article code:focus {
  outline: none; }

article .md__table {
  margin: -.5rem;
  padding: .5rem;
  overflow: auto; }
  article .md__table::-webkit-scrollbar-track {
    margin: .5rem; }
  article .md__table table {
    border: var(--border);
    border-radius: var(--border-radius);
    border-spacing: 0;
    overflow: auto;
    -webkit-overflow-scrolling: touch; }
    article .md__table table th {
      font-weight: normal; }
    article .md__table table td {
      border-top: 1px solid var(--border-color); }
    article .md__table table th, article .md__table table td {
      padding: .3rem 16px;
      white-space: nowrap; }

article .mermaid svg {
  display: block;
  margin: auto;
  zoom: 80%; }
</style>
  
</head>






<body>
<main>
  <div class="flex-left">
    <div class="outer">
      <div class="flex-visible">
        
  <div class="inner avatar">
  <img src="../../../../images/freeze.png" class="avatar" width="96px" height="96px" />
  <h2>Net Pipe</h2>
  <div class="data-left">
    <h3>57</h3>
    <span>Posts</span>
  </div>
  <div class="data-right">
    
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    <h3>18313</h3>
    <span>Words</span>
  </div>
  <div class="social">
    <div class="social-box">
      <img src="../../../../images/search.svg"/>
      <div class="search">
        <input type="text" placeholder="Search" id="search-key" maxlength="64" data-hotkeys="s/" onkeydown="keyup_submit(event);" />
      </div>
    </div>
    <a class="alternate" href="../../../../">
      <div class="social-box">
        <img src="../../../../images/home.svg"/>
        <object><a href="../../../../">Home</a></object>
      </div>
    </a>
    <a class="alternate" href="../../../../post/">
      <div class="social-box">
        <img src="../../../../images/posts.svg"/>
        <object><a href="../../../../post/">Posts</a></object>
      </div>
    </a>
    <a class="alternate" type="application/rss+xml" href="../../../../index.xml">
      <div class="social-box">
        <img src="../../../../images/rss.svg"/>
        <object><a  type="application/rss+xml" href="../../../../index.xml">RSS</a></object>
      </div>
    </a>
  </div>
  <script>
    function keyup_submit(e){ 
    var evt = window.event || e; 
      if (evt.keyCode == 13){
        window.location.href = '/_search?wd=' + document.getElementById("search-key").value;
      }
    }
  </script>
</div>
  <div class="inner categories">
  <h2><img src="../../../../images/categories.svg" />Categories</h2>
  
  <span class="post-categories">
    <a href="../../../../categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E5%AD%A6/">基础数学</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/dp/">DP</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E4%BF%A1%E6%81%AF%E5%AD%A6/">信息学</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E6%95%B0%E8%AE%BA/">数论</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E7%BB%84%E5%90%88%E6%95%B0%E5%AD%A6/">组合数学</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E5%9B%BE%E8%AE%BA/">图论</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">数据结构</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E5%AD%97%E7%AC%A6%E4%B8%B2/">字符串</a>
  </span>
  
  <span class="post-categories">
    <a href="../../../../categories/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/">基础算法</a>
  </span>
  
</div>

      </div>
      <div class="flex-hidden">
        
  <div class="inner">
  <h2><img src="../../../../images/notice.svg" />Notice</h2>
  <p>Under Construction ...</p>
</div>
  

<div class="inner">
  <h2><img src="../../../../images/toc.svg">TOC</h2>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#01-背包">01 背包</a>
      <ul>
        <li><a href="#空间优化">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#完全背包">完全背包</a>
      <ul>
        <li><a href="#空间优化-1">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#多重背包">多重背包</a>
      <ul>
        <li><a href="#二进制优化">二进制优化</a></li>
      </ul>
    </li>
    <li><a href="#分组背包">分组背包</a></li>
    <li><a href="#二维背包">二维背包</a></li>
    <li><a href="#方案总数">方案总数</a></li>
    <li><a href="#最优方案总数">最优方案总数</a></li>
  </ul>
</nav>
</div>



      </div>
    </div>
  </div>

  
<div class="blog-page">
  <article class="post-content">
    
    <div class="post-header">
      <h1>背包问题</h1>
      <span class="post-meta">
        
          <img src="../../../../images/time.svg"></img>
          Jan 19, 2021
        
      </span>
      <span class="post-categories">
        
          <a href="../../../../categories/%e4%bf%a1%e6%81%af%e5%ad%a6/">信息学</a>
        
          <a href="../../../../categories/dp/">DP</a>
        
      </span>
    </div>
    
    <h2 id="01-背包">01 背包 <a class="anchor" href="#01-%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>给定 $n$ 个物品，第 $i$ 个物品体积为 $c[i]$, 价值为 $w[i]$. 现有容积为 $m$ 的背包，求将物品装入背包得到的最大价值.</p>
</blockquote>
<p>$f[i,v]$: 从前 $i$ 个物品中，选出总体积为 $v$ 的物品，能得到的最大价值.</p>
<ul>
<li>不选第 $i$ 个物品：$f[i,v]=f[i-1,v]$.</li>
<li>选第 $i$ 个物品：$f[i,v]=f[i-1,v-w_i]+c_i$.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[i,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[i-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[i-1,v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)<span style="color:#728e00">\\</span>
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>时间复杂度：$O(nm)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>) {
        <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
    }
}
<span style="color:#95a5a6">// 问题的解是 f[n][m]
</span></code></pre></div><h3 id="空间优化">空间优化 <a class="anchor" href="#%e7%a9%ba%e9%97%b4%e4%bc%98%e5%8c%96">¶</a></h3><p>实际上，<a href="../../../../post/dynamic-programming/dynamic-programming/#state-transition-equation">状态转移方程</a> 的第一维可以去掉，即让新状态覆盖旧状态，以降低空间开销.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>但在程序中，直接移除第一维会导致错误. 令 $w=1,c=2$，执行内层循环，可见错误的根源.</p>





<div class="book-tabs"><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-0" checked="checked" />
  <label for="tabs-%!s(int=1)-0">$v=1$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-1"  />
  <label for="tabs-%!s(int=1)-1">$v=2$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{2}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=4$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-2"  />
  <label for="tabs-%!s(int=1)-2">$v=3$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$\textcolor{blue}{4}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=6$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=1)" id="tabs-%!s(int=1)-3"  />
  <label for="tabs-%!s(int=1)-3">$v=4$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$4$</td>
<td style="text-align:center">$\textcolor{blue}{6}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=8$</td>
</tr>
</tbody>
</table>
</div></div>

<p>在内层循环中，$f[v-w]$ 不能比 $f[v]$ 先更新，否则相当于同一物品被装多次. 倒序枚举 $v$ 以解决问题.</p>





<div class="book-tabs"><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-0" checked="checked" />
  <label for="tabs-%!s(int=2)-0">$v=4$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-1"  />
  <label for="tabs-%!s(int=2)-1">$v=3$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$2$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-2"  />
  <label for="tabs-%!s(int=2)-2">$v=2$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$2$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=2)" id="tabs-%!s(int=2)-3"  />
  <label for="tabs-%!s(int=2)-3">$v=1$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$2$</td>
</tr>
</tbody>
</table>
</div></div>

<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)    <span style="color:#95a5a6">// 倒序枚举
</span><span style="color:#95a5a6"></span>        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="完全背包">完全背包 <a class="anchor" href="#%e5%ae%8c%e5%85%a8%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，每种物品可装无限次.</p>
</blockquote>
<p>$f[i,v]$: 从前 $i$ 种物品中，选出总体积为 $v$ 的物品，能得到的最大价值.</p>
<ul>
<li>不选第 $i$ 种物品：$f[i,v]=f[i-1,v]$.</li>
<li>多选一个第 $i$ 种物品：$f[i,v]=f[i,v-w_i]+c_i$.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[i,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[i-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[i,v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>时间复杂度：$O(nm)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>) {
        <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
    }
}
</code></pre></div><h3 id="空间优化-1">空间优化 <a class="anchor" href="#%e7%a9%ba%e9%97%b4%e4%bc%98%e5%8c%96-1">¶</a></h3><p>参照 <a href="#%E7%A9%BA%E9%97%B4%E4%BC%98%E5%8C%96">01 背包 - 空间优化</a> 中的错误做法：直接移除第一维，并升序枚举 $v$，相当于将同种物品装多次.</p>





<div class="book-tabs"><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-0" checked="checked" />
  <label for="tabs-%!s(int=3)-0">$v=1$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$\textcolor{blue}{0}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=2$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-1"  />
  <label for="tabs-%!s(int=3)-1">$v=2$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$\textcolor{blue}{2}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=4$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-2"  />
  <label for="tabs-%!s(int=3)-2">$v=3$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$\textcolor{blue}{4}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=6$</td>
<td style="text-align:center">$0$</td>
</tr>
</tbody>
</table>
</div><input type="radio" class="toggle" name="tabs-%!s(int=3)" id="tabs-%!s(int=3)-3"  />
  <label for="tabs-%!s(int=3)-3">$v=4$</label>
  <div  class="book-tabs-pure-content" ><table>
<thead>
<tr>
<th style="text-align:center">$v$</th>
<th style="text-align:center">$0$</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$f[v]$</td>
<td style="text-align:center">$0$</td>
<td style="text-align:center">$2$</td>
<td style="text-align:center">$4$</td>
<td style="text-align:center">$\textcolor{blue}{6}$</td>
<td style="text-align:center">$\textcolor{blue}{f[v-w]}+c=8$</td>
</tr>
</tbody>
</table>
</div></div>

<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>)
        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="多重背包">多重背包 <a class="anchor" href="#%e5%a4%9a%e9%87%8d%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，第 $i$ 种物品可装 $s_i$ 次.</p>
</blockquote>
<p>在内层循环中，分别绑定 $1,2,\cdots s_i$ 个物品作为一个物品，参与 01 背包.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[v] = <span style="color:#728e00">\max</span><span style="color:#728e00">_{</span>k=1,2,<span style="color:#728e00">\cdots</span>,s<span style="color:#728e00">_</span>i<span style="color:#728e00">}</span><span style="color:#728e00">\begin</span><span style="color:#728e00">{</span>cases<span style="color:#728e00">}</span>
f[v]<span style="color:#728e00">\\</span>
f[v-k<span style="color:#728e00">\cdot</span> w<span style="color:#728e00">_</span>i]+k<span style="color:#728e00">\cdot</span> c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥k<span style="color:#728e00">\cdot</span> w<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>cases<span style="color:#728e00">}</span>
</code></pre></div><p>时间复杂度：$O(m\sum s_i)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
        <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">k</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">s</span>[<span style="color:#434f54">i</span>] <span style="color:#728e00">&amp;&amp;</span> <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">k</span> <span style="color:#728e00">++</span>)
            <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h3 id="二进制优化">二进制优化 <a class="anchor" href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e4%bc%98%e5%8c%96">¶</a></h3><ul>
<li>任意正整数 $n$ 可拆分为 $1,2,4,\cdots,2^k,n-2^k$（$n-2^k≥0$ 且 $k$ 尽量大）.</li>
<li>相反，$1,2,4,\cdots,2^k,n-2^k$ 能且仅能组合出 $[1,n]$ 中的所有整数.</li>
</ul>
<p>将 $s_i$ 个物品拆分为 $1,2,4,\cdots,2^k,s_i-2^k$ 个物品（共 $\log s_i$ 组），并绑定每组为一个物品，参与 01 背包.
例如，$s_i=15$ 可以拆分为以下 $4$ 组：</p>
<table>
<thead>
<tr>
<th style="text-align:center">组别</th>
<th style="text-align:center">$1$</th>
<th style="text-align:center">$2$</th>
<th style="text-align:center">$3$</th>
<th style="text-align:center">$4$</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">总体积</td>
<td style="text-align:center">$w_i$</td>
<td style="text-align:center">$2w_i$</td>
<td style="text-align:center">$4w_i$</td>
<td style="text-align:center">$8w_i$</td>
</tr>
<tr>
<td style="text-align:center">总价值</td>
<td style="text-align:center">$c_i$</td>
<td style="text-align:center">$2c_i$</td>
<td style="text-align:center">$4c_i$</td>
<td style="text-align:center">$8c_i$</td>
</tr>
</tbody>
</table>
<p>此 $4$ 组物品可组合出所有策略（选 $1\cdots 15$ 个物品）. 例如要选 $12$ 个物品，则同时选第 $3,4$ 组即可.</p>
<p>时间复杂度：$O(m\sum\log{s_i})$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#00979d">int</span> <span style="color:#434f54">wi</span>, <span style="color:#434f54">ci</span>, <span style="color:#434f54">s</span>;
    <span style="color:#434f54">cin</span> <span style="color:#728e00">&gt;&gt;</span> <span style="color:#434f54">wi</span> <span style="color:#728e00">&gt;&gt;</span> <span style="color:#434f54">ci</span> <span style="color:#728e00">&gt;&gt;</span> <span style="color:#434f54">s</span>;
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">k</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">s</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">*=</span> <span style="color:#8a7b52">2</span>) {
        <span style="color:#434f54">w</span>[<span style="color:#728e00">++</span> <span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">wi</span>, <span style="color:#434f54">c</span>[<span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">k</span> <span style="color:#728e00">*</span> <span style="color:#434f54">ci</span>;
        <span style="color:#434f54">s</span> <span style="color:#728e00">-=</span> <span style="color:#434f54">k</span>;
    }
    <span style="color:#728e00">if</span> (<span style="color:#434f54">s</span>)
        <span style="color:#434f54">w</span>[<span style="color:#728e00">++</span> <span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">s</span> <span style="color:#728e00">*</span> <span style="color:#434f54">wi</span>, <span style="color:#434f54">c</span>[<span style="color:#434f54">cnt</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">s</span> <span style="color:#728e00">*</span> <span style="color:#434f54">ci</span>;
}
<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">tot</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="分组背包">分组背包 <a class="anchor" href="#%e5%88%86%e7%bb%84%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>背包体积为 $m$，有 $t$ 组物品，第 $k$ 组有 $s_k$ 个，其中第 $i$ 个体积为 $w_{ki}$，价值为 $c_{ki}$. 每组只能取走一个物品. 求将物品装入背包得到的最大价值.</p>
</blockquote>
<p>$f[k,v]$：从前 $k$ 组物品中，选出总体积为 $v$ 的物品，能得到的最大价值.</p>
<ul>
<li>不选第 $k$ 组：$f[k,v]=f[k-1,v]$.</li>
<li>选第 $k$ 组：$\su f[k,v]=\max_{1\leq i\leq s_k}\ f[k-1,v-w_{ki}]+c_{ki}$.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[k,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[k-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span><span style="color:#728e00">\max</span><span style="color:#728e00">_{</span>1<span style="color:#728e00">\leq</span> i<span style="color:#728e00">\leq</span> s<span style="color:#728e00">_</span>k<span style="color:#728e00">}</span><span style="color:#728e00">\ </span>f[k-1,v-w<span style="color:#728e00">_{</span>ki<span style="color:#728e00">}</span>]+c<span style="color:#728e00">_{</span>ki<span style="color:#728e00">}</span><span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_{</span>ki<span style="color:#728e00">}</span>)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>可以省去第一维. 时间复杂度：$O(nm)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">k</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">t</span>; <span style="color:#434f54">k</span> <span style="color:#728e00">++</span>)
	<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
		<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">s</span>[<span style="color:#434f54">k</span>]; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
			<span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">k</span>][<span style="color:#434f54">i</span>])
				<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>],<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">k</span>][<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">k</span>][<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="二维背包">二维背包 <a class="anchor" href="#%e4%ba%8c%e7%bb%b4%e8%83%8c%e5%8c%85">¶</a></h2><blockquote>
<p>背包体积为 $V$，承重为 $M$. 有 $n$ 个物品，第 $i$ 个体积为 $v_i$，质量为 $m_i$，价值为 $c_i$. 求将物品装入背包得到的最大价值.</p>
</blockquote>
<p>$f[p,q]$：用体积为 $p$，承重为 $q$ 的背包放物品，能获得的最大总价值.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[p,q] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[p,q]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[p-v<span style="color:#728e00">_</span>i,q-m<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(p≥v<span style="color:#728e00">_</span>i,q≥m<span style="color:#728e00">_</span>i)
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>时间复杂度为 $O(nVM)$.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">p</span> <span style="color:#728e00">=</span> <span style="color:#434f54">V</span>; <span style="color:#434f54">p</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">v</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">p</span> <span style="color:#728e00">--</span>)
        <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">q</span> <span style="color:#728e00">=</span> <span style="color:#434f54">M</span>; <span style="color:#434f54">q</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">m</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">q</span> <span style="color:#728e00">--</span>)
            <span style="color:#434f54">f</span>[<span style="color:#434f54">p</span>][<span style="color:#434f54">q</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">p</span>][<span style="color:#434f54">q</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">p</span> <span style="color:#728e00">-</span> <span style="color:#434f54">v</span>[<span style="color:#434f54">i</span>]][<span style="color:#434f54">q</span> <span style="color:#728e00">-</span> <span style="color:#434f54">m</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
</code></pre></div><h2 id="方案总数">方案总数 <a class="anchor" href="#%e6%96%b9%e6%a1%88%e6%80%bb%e6%95%b0">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，求将物品放入背包的方案数.</p>
</blockquote>
<p>$g[i,v]$：把前 $i$ 个物品（部分或全部）放入体积为 $v$ 的背包的方案总数.</p>
<ul>
<li>不放第 $i$ 个物品：有 $g[i-1,v]$ 种</li>
<li>放第 $i$ 个物品：有 $g[i-1,v-w_i]$ 种</li>
</ul>
<p>$$g[i,v]=g[i-1,v]+g[i-1,v-w_i]$$</p>
<p>同样可以省去第一维：</p>
<p>$$g[v]=g[v]+g[v-w_i]\quad(v≥w_i)$$</p>
<p>初始条件：$g[0]=1$. 因为当背包体积为 $0$ 时只有一个方案：不放任何物品.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#434f54">g</span>[<span style="color:#8a7b52">0</span>] <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>;
<span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>)
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>)
        <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]];
</code></pre></div><h2 id="最优方案总数">最优方案总数 <a class="anchor" href="#%e6%9c%80%e4%bc%98%e6%96%b9%e6%a1%88%e6%80%bb%e6%95%b0">¶</a></h2><blockquote>
<p>基于 <a href="#01-%E8%83%8C%E5%8C%85">01 背包</a>，求最优方案数.</p>
</blockquote>
<p>已知 01 背包 的状态转移方程：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-latex" data-lang="latex">f[i,v] = <span style="color:#728e00">\max\left\{\begin</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span>
<span style="color:#728e00">&amp;</span>f[i-1,v]<span style="color:#728e00">\\</span>
<span style="color:#728e00">&amp;</span>f[i-1,v-w<span style="color:#728e00">_</span>i]+c<span style="color:#728e00">_</span>i<span style="color:#728e00">\quad</span>(v≥w<span style="color:#728e00">_</span>i)<span style="color:#728e00">\\</span>
<span style="color:#728e00">\end</span><span style="color:#728e00">{</span>aligned<span style="color:#728e00">}</span><span style="color:#728e00">\right</span>.
</code></pre></div><p>$g[i,v]$：把前 $i$ 个物品（部分或全部）放入体积为 $v$ 的背包的最优方案数.</p>
<ul>
<li>
<p>若 $f[i-1,v]&gt;f[i-1,v-w_i]+c_i$，不放物品 $i$ 最优：$g[i,v]=g[i-1,v]$.</p>
</li>
<li>
<p>若 $f[i-1,v]&lt;f[i-1,v-w_i]+c_i$，放物品 $i$ 最优：$g[i,v]=g[i-1,v-w_i]$.</p>
</li>
<li>
<p>若相等，则两种方案都最优：$g[i,v]=g[i-1,v]+g[i-1,v-w_i]$.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">++</span>) {
        <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
        <span style="color:#728e00">if</span> (<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>])
            <span style="color:#434f54">g</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span> (<span style="color:#434f54">f</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">i</span> <span style="color:#728e00">-</span> <span style="color:#8a7b52">1</span>][<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">g</span>[<span style="color:#434f54">i</span>][<span style="color:#434f54">v</span>] <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]];
    }
}
</code></pre></div><p>省去第一维：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">i</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">1</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">&lt;=</span> <span style="color:#434f54">n</span>; <span style="color:#434f54">i</span> <span style="color:#728e00">++</span>) {
    <span style="color:#728e00">for</span> (<span style="color:#00979d">int</span> <span style="color:#434f54">v</span> <span style="color:#728e00">=</span> <span style="color:#434f54">m</span>; <span style="color:#434f54">v</span> <span style="color:#728e00">&gt;=</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]; <span style="color:#434f54">v</span> <span style="color:#728e00">--</span>) {
        <span style="color:#00979d">int</span> <span style="color:#434f54">maxn</span> <span style="color:#728e00">=</span> <span style="color:#434f54">max</span>(<span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>], <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>]);
        <span style="color:#00979d">int</span> <span style="color:#434f54">maxg</span> <span style="color:#728e00">=</span> <span style="color:#8a7b52">0</span>; <span style="color:#95a5a6">// 最优方案数
</span><span style="color:#95a5a6"></span>        <span style="color:#728e00">if</span>(<span style="color:#434f54">maxn</span> <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>])
            <span style="color:#434f54">maxg</span> <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span>];
        <span style="color:#728e00">if</span>(<span style="color:#434f54">maxn</span> <span style="color:#728e00">==</span> <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]] <span style="color:#728e00">+</span> <span style="color:#434f54">c</span>[<span style="color:#434f54">i</span>])
            <span style="color:#434f54">maxg</span> <span style="color:#728e00">+=</span> <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span> <span style="color:#728e00">-</span> <span style="color:#434f54">w</span>[<span style="color:#434f54">i</span>]];
        <span style="color:#434f54">f</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">maxn</span>, <span style="color:#434f54">g</span>[<span style="color:#434f54">v</span>] <span style="color:#728e00">=</span> <span style="color:#434f54">maxg</span>;
    }
}
</code></pre></div>
  </article>
</div>



  <div class="flex-right">
    <div class="outer">
      
  <div class="inner">
  <h2><img src="../../../../images/notice.svg" />Notice</h2>
  <p>Under Construction ...</p>
</div>
  

<div class="inner">
  <h2><img src="../../../../images/toc.svg">TOC</h2>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#01-背包">01 背包</a>
      <ul>
        <li><a href="#空间优化">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#完全背包">完全背包</a>
      <ul>
        <li><a href="#空间优化-1">空间优化</a></li>
      </ul>
    </li>
    <li><a href="#多重背包">多重背包</a>
      <ul>
        <li><a href="#二进制优化">二进制优化</a></li>
      </ul>
    </li>
    <li><a href="#分组背包">分组背包</a></li>
    <li><a href="#二维背包">二维背包</a></li>
    <li><a href="#方案总数">方案总数</a></li>
    <li><a href="#最优方案总数">最优方案总数</a></li>
  </ul>
</nav>
</div>



    </div>
  </div>

  <script src="../../../../js/jquery.min.js"></script>


<script defer>
function IsPC() {  
  var userAgentInfo = navigator.userAgent;
  var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");  
  for (var v = 0; v < Agents.length; v ++) {  
    if (userAgentInfo.indexOf(Agents[v]) > 0) {
      return false;
    }
  }
  return true;
}
function detectZoom() {
  var ratio = 0,
  screen = window.screen,
  ua = navigator.userAgent.toLowerCase();
  if (window.devicePixelRatio !== undefined)
    ratio = window.devicePixelRatio;
  else if (~ua.indexOf('msie')) {
    if (screen.deviceXDPI && screen.logicalXDPI)
      ratio = screen.deviceXDPI / screen.logicalXDPI;
  }
  else if (window.outerWidth !== undefined && window.innerWidth !== undefined)
    ratio = window.outerWidth / window.innerWidth;
  
  if (ratio)
    ratio = Math.round(ratio * 100);
  return ratio;
}
$('img').each(function(id, el, arr) {
  if (el.parentElement.tagName == 'P') {
    el.className = "md__image";
    var src = el.getAttribute('src');
    if (IsPC() && src.substr(src.lastIndexOf(".") + 1) != "svg") {
      if (el.style.zoom)
        el.style.zoom = parseFloat(el.style.zoom) / detectZoom();
      else
        el.style.zoom = 100 / detectZoom();
    }
  }
});

















</script>





<link rel="stylesheet" href="../../../../katex/katex.min.css">
<script src="../../../../katex/katex.min.js"></script>
<script src="../../../../katex/auto-render.min.js"></script>

<script>
  function renderTex() {
    renderMathInElement(document.body, {
      trust: true,
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "$", right: "$", display: false }
      ],
      macros: {
        
        "\\d": "\\text{d}",
        "\\zh": "\\footnotesize \\ ",
        "\\en": "\\normalsize \\ ",
        "\\su": "\\displaystyle",
        "\\eq": "\\Longleftrightarrow",
        "\\intro": "\\Longrightarrow",
        "\\mathring": "\\overset\{\\normalsizeₒ\}",
        "\\arccot": "\\text\{arccot\} \\, ",
        "\\xor": "\\text\{xor\} \\, ",
        "\\mex": "\\text\{mex\} \\, "
      }
    });
  }  
  document.addEventListener("DOMContentLoaded", function() {
    renderTex();
  });

</script>

<script>
  $('.language-latex').each(function(id, el, arr) {
    function toText(text) { 
      var temp = document.createElement("div"); 
      temp.innerHTML = text; 
      var output = temp.innerText || temp.textContent; 
      temp = null; 
      return output; 
    } 
    tex = toText(el.innerHTML);
    el.parentElement.outerHTML = '<div>$$' + tex + '$$</div>';
  });

</script>

<script>
  $('table').each(function(id, el, arr) {
    el.outerHTML = `<div class="md__table">${el.outerHTML}</div>`;
  });
</script>



<script src="../../../../js/mermaid.min.js"></script>

<script>
  mermaid.initialize({
    
    themeCSS: ".node rect { \
      fill: transparent;    \
      stroke: transparent;  \
    }                       \
    .nodeLabel {            \
      font-size: 24px;      \
    }",
    startOnLoad: true,
    flowchart: {
      curve: 'cardinal'
    },
    securityLevel: 'loose',
  });
</script>

<script>
  Array.from(document.getElementsByClassName("language-mermaid")).forEach(
    (el) => {
      el.parentElement.outerHTML = `<div class="mermaid">${el.innerText}</div>`;
    }
  );
</script>

  
</main>
</body>
</html>